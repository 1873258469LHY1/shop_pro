(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["RankList"],{"1c31":function(t,e,n){"use strict";n("785b")},2736:function(t,e,n){},"2ec3":function(t,e,n){"use strict";n("7019")},"390e":function(t,e,n){"use strict";n("393d")},"393d":function(t,e,n){},7019:function(t,e,n){},"785b":function(t,e,n){},"8c95":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rankList"},[n("div",{staticClass:"rankNav"},[n("el-card",[n("div",{staticClass:"navHeader",attrs:{slot:"header"},slot:"header"},t._l(t.ranklist,(function(e,a){return n("span",{key:e.id,class:{active:t.ranksIndex===a},on:{click:function(e){return t.changeRanks(a)}}},[t._v(t._s(e.name))])})),0),n("Billboard",{attrs:{ranks:t.ranks}})],1)],1),n("RankDetail")],1)},i=[],s=(n("a434"),n("96cf"),n("1da1")),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ul",t._l(t.ranks,(function(e,a){return n("li",{key:e.id,class:{navItem:!0,active:t.rankIndex===a},on:{click:function(n){return t.handleChange(a,e.sourceid,e.name)}}},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.pic,expression:"rank.pic"}]}),n("div",{staticClass:"navContainer"},[n("span",{staticClass:"name"},[t._v(t._s(e.name))]),n("span",{staticClass:"time"},[t._v(t._s(e.pub))])])])})),0)])},c=[],o=(n("b0c0"),{name:"BillBoard",props:["ranks"],data:function(){return{rankIndex:0,rankData:{}}},methods:{handleChange:function(t,e,n){this.rankIndex=t,this.$bus.$emit("changeDetail",e,n)}},watch:{ranks:function(t){this.rankData=t[0];var e=this.rankData,n=e.sourceid,a=e.name;this.handleChange(0,n,a)}},mounted:function(){}}),l=o,u=(n("2ec3"),n("2877")),m=Object(u["a"])(l,r,c,!1,null,"24278bf2",null),d=m.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rankDetail"},[n("audio",{ref:"audio",attrs:{src:t.url}}),n("div",[n("h3",{staticClass:"title"},[t._v(t._s(t.bangTitle))]),n("span",{staticClass:"update-time"},[t._v("更新时间: "+t._s(t.date))])]),n("div",{staticClass:"btns"},[n("el-button",{staticClass:"active",attrs:{round:""},on:{click:t.playMusic}},[n("i",{staticClass:"iconfont icon-bofang"}),t._v(" 播放全部 ")]),n("el-button",{attrs:{round:""},on:{click:t.pauseMusic}},[n("i",{staticClass:"iconfont icon-zanting"}),t._v(" 暂停 ")]),n("el-button",{attrs:{round:""},on:{click:function(e){return t.addSong(1)}}},[n("i",{staticClass:"iconfont icon-icon-test"}),t._v(" 添加 ")]),n("el-button",{attrs:{round:""},on:{click:function(e){return t.addSong(0)}}},[n("i",{staticClass:"iconfont icon-shoucang"}),t._v(" 收藏 ")]),n("a",{attrs:{href:"#commends"}},[n("el-button",{attrs:{round:""}},[n("i",{staticClass:"iconfont icon-pinglun"}),t._v(" 评论 ")])],1)],1),n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%",overflow:"hidden"},attrs:{data:t.rankSongs,stripe:""},on:{"row-click":t.playEachSong}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"100"}}),n("el-table-column",{attrs:{prop:"name",label:"歌曲",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.row.pic,expression:"scope.row.pic"}],staticStyle:{width:"54px",height:"54px","margin-right":"15px"},attrs:{alt:""}})]),n("div",[t._v(t._s(e.row.name))])]}}])}),n("el-table-column",{attrs:{prop:"artist",label:"歌手",width:"180"}}),n("el-table-column",{attrs:{prop:"album",label:"专辑",width:"250"}}),n("el-table-column",{attrs:{prop:"songTimeMinutes",label:"时长",width:"80"}})],1)],1),n("Pagination",{attrs:{total:t.total1}}),n("a",{attrs:{name:"commends"}}),n("Comments",{attrs:{title:t.title1,comments:t.comments1}}),n("Comments",{attrs:{title:t.title2,comments:t.comments2}}),n("Pagination",{attrs:{total:t.total1}})],1)},p=[],h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-pagination",{staticClass:"pagination",attrs:{"page-size":t.limit,"pager-count":5,layout:"prev, pager, next ",total:t.total},on:{"update:pageSize":function(e){t.limit=e},"update:page-size":function(e){t.limit=e}}})],1)},g=[],v={name:"Pagination",props:["total"],data:function(){return{limit:5}},mounted:function(){}},k=v,b=(n("e898"),Object(u["a"])(k,h,g,!1,null,"3a719660",null)),w=b.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comments"},[n("div",{staticClass:"hotComments"},[n("span",[t._v(t._s(t.title))]),n("span",{staticClass:"count"},[t._v(t._s(t.comments.length)+"条")])]),n("ul",t._l(t.comments,(function(e){return n("li",{key:e.id,staticClass:"eachComment"},[n("img",{attrs:{src:e.u_pic}}),n("div",{staticClass:"commentDetail"},[n("span",{staticClass:"commentDetail-nickname"},[t._v(t._s(e.like_num))]),n("span",{staticClass:"commentDetail-text"},[t._v(t._s(e.msg))]),n("span",{staticClass:"commentDetail-time"},[t._v(" "+t._s(e.time))])])])})),0)])},C=[],x={name:"Comments",props:["title","comments"]},R=x,y=(n("1c31"),Object(u["a"])(R,_,C,!1,null,"cf6eddf6",null)),S=y.exports,$={name:"RankDetail",data:function(){return{rankSongs:[],total1:0,title1:"热门评论",title2:"最新评论",date:"",bangTitle:"",limit:20,sId:"",comments1:[],comments2:[],loading:!1,url:"",isShow:!0}},watch:{sId:function(t){this.getComments(t),this.getUrl(t)}},methods:{playEachSong:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.getUrl(t.rid);case 2:e.$refs.audio.play();case 3:case"end":return n.stop()}}),n)})))()},pauseMusic:function(){this.$refs.audio.pause()},playMusic:function(){this.$refs.audio.play()},getUrl:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$API.rankList.reqSongUrl(t);case 2:a=n.sent,e.url=a.url;case 4:case"end":return n.stop()}}),n)})))()},getComments:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$API.rankList.reqGetComments(t,"get_rec_comment");case 2:return a=n.sent,e.comments1=a.rows,n.next=6,e.$API.rankList.reqGetComments(t,"get_comment");case 6:i=n.sent,e.comments2=i.rows;case 8:case"end":return n.stop()}}),n)})))()},addSong:function(t){this.$alert("使用酷我音乐客户端".concat(1===t?"添加":"收藏","该歌单"),"提示",{showCancelButton:!0,cancelButtonText:"下载酷我音乐",confirmButtonText:"已安装酷我音乐"})},getRequest:function(){var t=this;this.$bus.$on("changeDetail",function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(n,a){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.$API.rankList.reqRankDetail,t.bangTitle=a,t.loading=!0,e.next=5,i(n);case 5:s=e.sent,t.loading=!1,t.rankSongs=s.data.musicList,t.date=s.data.pub,t.total1=t.rankSongs.length,t.sId=t.rankSongs[0].rid,t.getComments(t.sId);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getRequest();case 2:case"end":return e.stop()}}),e)})))()},components:{Pagination:w,Comments:S}},I=$,D=(n("390e"),Object(u["a"])(I,f,p,!1,null,"67d26f7d",null)),O=D.exports,j={name:"RankList",data:function(){return{ranklist:[],ranks:[],ranksIndex:0}},methods:{changeRanks:function(t){this.ranks=this.ranklist[t].list,this.ranksIndex=t},getRequest:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$API.rankList.reqRankList,e.next=3,n();case 3:a=e.sent,t.ranklist=a.data.splice(0,3);case 5:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getRequest();case 2:t.changeRanks(0);case 3:case"end":return e.stop()}}),e)})))()},components:{Billboard:d,RankDetail:O}},L=j,q=(n("b3e4"),Object(u["a"])(L,a,i,!1,null,"22e1c867",null));e["default"]=q.exports},a114:function(t,e,n){},a434:function(t,e,n){"use strict";var a=n("23e7"),i=n("23cb"),s=n("a691"),r=n("50c4"),c=n("7b0b"),o=n("65f0"),l=n("8418"),u=n("1dde"),m=n("ae40"),d=u("splice"),f=m("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,g=9007199254740991,v="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d||!f},{splice:function(t,e){var n,a,u,m,d,f,k=c(this),b=r(k.length),w=i(t,b),_=arguments.length;if(0===_?n=a=0:1===_?(n=0,a=b-w):(n=_-2,a=h(p(s(e),0),b-w)),b+n-a>g)throw TypeError(v);for(u=o(k,a),m=0;m<a;m++)d=w+m,d in k&&l(u,m,k[d]);if(u.length=a,n<a){for(m=w;m<b-a;m++)d=m+a,f=m+n,d in k?k[f]=k[d]:delete k[f];for(m=b;m>b-a+n;m--)delete k[m-1]}else if(n>a)for(m=b-a;m>w;m--)d=m+a-1,f=m+n-1,d in k?k[f]=k[d]:delete k[f];for(m=0;m<n;m++)k[m+w]=arguments[m+2];return k.length=b-a+n,u}})},b0c0:function(t,e,n){var a=n("83ab"),i=n("9bf2").f,s=Function.prototype,r=s.toString,c=/^\s*function ([^ (]*)/,o="name";a&&!(o in s)&&i(s,o,{configurable:!0,get:function(){try{return r.call(this).match(c)[1]}catch(t){return""}}})},b3e4:function(t,e,n){"use strict";n("a114")},e898:function(t,e,n){"use strict";n("2736")}}]);
//# sourceMappingURL=RankList.b3a289ea.js.map